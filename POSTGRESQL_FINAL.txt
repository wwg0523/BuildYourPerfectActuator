ğŸš€ **Synology NAS PostgreSQL í…Œì´ë¸” ìƒì„± - ìµœì¢… ì •ë¦¬**

---

## âš¡ ì¦‰ì‹œ ì‹¤í–‰ (copy & paste)

**Windows PowerShell (ê´€ë¦¬ì ê¶Œí•œ)ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ ì‹¤í–‰:**

```powershell
docker exec postgres psql -U postgres -d sacrp_production -c "CREATE TABLE IF NOT EXISTS leaderboard_entries (id UUID PRIMARY KEY, user_id UUID, player_name TEXT NOT NULL, company TEXT, score INT NOT NULL, completion_time BIGINT NOT NULL, time_bonus INT DEFAULT 0, final_score INT NOT NULL, played_at TIMESTAMPTZ DEFAULT NOW()); CREATE TABLE IF NOT EXISTS email_logs (id UUID PRIMARY KEY, user_id UUID, email_type VARCHAR(50) NOT NULL, recipient_email TEXT NOT NULL, sent_at TIMESTAMPTZ DEFAULT NOW(), success BOOLEAN NOT NULL, error_message TEXT); CREATE TABLE IF NOT EXISTS api_counter_logs (id UUID PRIMARY KEY, api_endpoint VARCHAR(255), action VARCHAR(50), success BOOLEAN, response_data JSONB, created_at TIMESTAMPTZ DEFAULT NOW()); CREATE INDEX IF NOT EXISTS idx_leaderboard_entries_score_time ON leaderboard_entries(score DESC, completion_time ASC, played_at ASC); CREATE INDEX IF NOT EXISTS idx_leaderboard_entries_played_at ON leaderboard_entries(played_at DESC); CREATE INDEX IF NOT EXISTS idx_email_logs_user_id ON email_logs(user_id); CREATE INDEX IF NOT EXISTS idx_email_logs_sent_at ON email_logs(sent_at DESC); CREATE INDEX IF NOT EXISTS idx_api_counter_logs_created_at ON api_counter_logs(created_at DESC);"
```

---

## âœ… í™•ì¸ ëª…ë ¹ì–´

```powershell
docker exec postgres psql -U postgres -d sacrp_production -c "\dt leaderboard_entries email_logs api_counter_logs"
```

---

## ğŸ“Š ìƒì„±ë˜ëŠ” í…Œì´ë¸”

| í…Œì´ë¸” | ìš©ë„ | í•µì‹¬ í•„ë“œ |
|--------|------|---------|
| **leaderboard_entries** | ë¦¬ë”ë³´ë“œ ë°ì´í„° ì €ì¥ | id, player_name, score, completion_time, final_score |
| **email_logs** | ì´ë©”ì¼ ë°œì†¡ ë¡œê·¸ | id, user_id, recipient_email, success |
| **api_counter_logs** | API í˜¸ì¶œ ë¡œê·¸ (í–¥í›„) | id, api_endpoint, success |

---

## ğŸ”„ í˜„ì¬ ì½”ë“œì™€ì˜ ì—°ë™

ë°±ì—”ë“œ ì½”ë“œ(`routes/game.ts`)ê°€ ë‹¤ìŒì„ ìˆ˜í–‰:

```typescript
// 1. POST /api/game/leaderboard 
// â†’ leaderboard_entries í…Œì´ë¸”ì— INSERT

// 2. GET /api/game/leaderboard
// â†’ leaderboard_entries í…Œì´ë¸”ì—ì„œ SELECT

// í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ(LeaderboardManager)ê°€:
// 1. ì ìˆ˜ ê³„ì‚°
// 2. POSTë¡œ ë¦¬ë”ë³´ë“œ í•­ëª© ì „ì†¡
// 3. GETìœ¼ë¡œ ìˆœìœ„ ì¡°íšŒ
// 4. ì´ë©”ì¼ ë°œì†¡ (email_logsì— ê¸°ë¡)
```

---

## ğŸ¯ 404 ì—ëŸ¬ í•´ê²° ìˆœì„œ

1. âœ… SQL ì‹¤í–‰ (í…Œì´ë¸” ìƒì„±)
2. âœ… í…Œì´ë¸” ì¡´ì¬ í™•ì¸
3. âœ… ê²Œì„ ì™„ë£Œ í›„ ê²°ê³¼ ì œì¶œ
4. âœ… ë¦¬ë”ë³´ë“œ ì¡°íšŒ
5. âœ… 404 ì‚¬ë¼ì§ âœ“

---

## ğŸ“ ì¶”ê°€ ì°¸ê³ 

- ìƒì„¸ ê°€ì´ë“œ: `QUICK_START_POSTGRESQL.md`
- SQL íŒŒì¼: `actuator-back/sql/CREATE_TABLES.sql`
- ìë™ ìŠ¤í¬ë¦½íŠ¸: `create_tables.bat`

---

## âœ¨ ì™„ë£Œ!

í…Œì´ë¸” ìƒì„± í›„ ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ë©´ ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.
